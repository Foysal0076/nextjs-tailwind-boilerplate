#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

export FORCE_COLOR=1
yarn  lint-staged
yarn check-types ||
(
  echo "âŒâŒâŒ Type check failed âŒâŒâŒ"
  echo "âš ï¸ âš ï¸ âš ï¸ View the errors above to see what went wrong âš ï¸ âš ï¸ âš ï¸"
  exit 1
)
yarn test ||
(
  echo "âŒâŒâŒ Tests failed âŒâŒâŒ"
  echo "âš ï¸ âš ï¸ âš ï¸ View the errors above to see what went wrong âš ï¸ âš ï¸ âš ï¸"
  exit 1
)
# If everyting passes... try to run a build
echo 'âœ…âœ…âœ… Allright...Code looks good...âœ…âœ…âœ…'
#echo 'âœ…âœ…âœ… Allright...Code looks good...Trying to build now...âœ…âœ…âœ…'

#yarn build ||
#(
#  echo "âŒâŒâŒ Build failed âŒâŒâŒ"
#  echo "âš ï¸ âš ï¸ âš ï¸ Next build failed: View the errors above to see what went wrong âš ï¸ âš ï¸ âš ï¸"
#  exit 1
#)

#IF it builds we can commit
#echo "âœ…âœ…âœ… Build successful âœ…âœ…âœ…"
echo "ğŸ‰ğŸ‰ğŸ‰ Committing now... ğŸ‰ğŸ‰ğŸ‰"